---
title: 前端知识梳理-HTTP协议类
date: 2017-10-01 16:49:27
tags: http协议 tcp/ip协议
---

## HTTP 协议类

### HTTP 协议的主要特点

- 简单快速
- 灵活
- 无连接
- 无状态

### HTTP 报文的组成部分

- 请求报文
    + 请求行
    + 请求头
    + 空行
    + 请求体
- 响应报文
    + 状态行
    + 响应头
    + 空行
    + 响应体

### HTTP 方法

- GET -> 获取资源
- POST -> 传输资源
- PUT -> 更新资源
- DELETE -> 

POST 和 GET 的区别
- GET 在浏览器回退时是无害的, 而 POST 会再次提交请求 ✅
- GET 产生的URL地址可以被收藏, 而 POST 不可以 ✅
- GET 请求会被浏览器主动缓存, 而 POST 不会, 除非手动设置 ✅
- GET 只能进行 URL 编码, 而 POST 支持多种编码方式 ✅
- GET 请求参数会被完成保存在浏览器历史记录里面, 而 POST 中的参数不会被保留
- GET 请求在 URL 中传送的参数是有长度限制的, 而 POST 没有限制
- 对参数的数据类型, GET只接受 ASCII 字符, 而POST没有限制
- GET 比 POST 更不安全, 因为参数直接暴露在URL上, 所以不能用来传递敏感信息
- GET 参数通过 URL 传递, POST 放在 Request body 中 ✅

### HTTP 状态码

状态码类
- 1xx: 指示信息 - 表示请求已经接收, 继续处理
- 2xx: 成功- 表示请求已被成功接收
- 3xx: 重定向 - 要完成请求必须进行更进一步的操作
- 4xx: 客户端错误 - 请求有语法错误或请求无法实现
- 5xx: 服务器错误 - 服务器未能实现合法的请求

常见 HTTP 状态码:

- 200 OK: 客户端请求成功
- 206 Partial Content: 客户发送了一个带有 Range 头的 GET 请求, 服务器完成了它
- 301 Moved Permanently: 所请求的页面已经转移至新的 URL (重定向)
- 302 Found: 所请求的页面已经临时 (临时重定向)
- 304 Not Modifued: 客户端有缓存的文档并发出一个条件性请求, 服务器告诉客户端原来缓存的文档可以继续使用.
- 400 Bad Request: 客户端请求有语法错误, 不能被服务器理解
- 401 Unauthorized: 请求未经授权, 这个状态代码必须和 WWW-Authenticate 报头域一起使用
- 403 Forbidden: 对被请求页面的访问被禁止 (一般页面的地址只能通过服务器访问,会报此类错误)
- 404 Not Found: 请求资源不存在
- 500 Internal Server Error: 服务器发生不可预期的错误原来缓冲的文档还可以继续使用

### 持久连接

版本支持条件: HTTP1.1

HTTP 协议采用"请求-应答"模式, 当使用普通模式, 即非 Keep-Alive 模式时, 每个请求/应答都要建立一个连接, 完成之后立即断开连接 (HTTP协议为无连接的协议)

当使用 Keep-Alive 模式 (又称持久连接, 连接重用)时, Keep-Alive 功能使客户端到服务器端的连接持续有效, 当出现对服务器的后续请求时, Keep-Alive功能避免了建立或者重新建立连接.
### 管线化

在使用持久连接的情况下, 某个连接上消息的传递类似于:

请求1 -> 响应1 -> 请求2 -> 响应2 -> 请求3 -> 响应3

某个连接上的消息变成了类似这样:

请求1 -> 请求2 -> 请求3 -> 响应1 -> 响应2 -> 响应3

管线化:

- 管线化机制通过持久连接完成, 仅HTTP/1.1支持此技术
- 只有 GET 和 HEAD 请求可以进行管线化, 而 POST 则有所限制
- 初次创建连接时不应该启动管线化, 而 POST 则有所限制
- 管线化不会影响响应到来的顺序, 如上面的例子, 响应返回的顺序并未改变
- HTTP/1.1 要求服务器支持管线化, 但并不是要求服务器也对响应进行管线化处理, 只是要求对于管线化的请求不失败即可
- 由于上面提到的服务端问题, 开启管线化很可能并不会带来大幅度的性能提升, 而且很多服务器端和代理程序对管线化的支持并不好, 因为现代浏览器如 Chrome 和 Firefox 默认并未开启管线化支持.

### 原型, 构造函数, 实例, 原型链
关系如下图:
![原型, 构造函数, 实例](https://ws4.sinaimg.cn/large/006tKfTcly1fkimbsoz73j30ge0e83z8.jpg)